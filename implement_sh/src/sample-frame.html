

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>sample/frame.h &mdash; CSC-ATAMO Dusty Project 0.6a (ALPHA) documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../../genindex.html"/>
        <link rel="search" title="Search" href="../../search.html"/>
    <link rel="top" title="CSC-ATAMO Dusty Project 0.6a (ALPHA) documentation" href="../../index.html"/>
        <link rel="up" title="Sensor Host Design" href="../main.html"/>
        <link rel="next" title="sample/sensor.h" href="sample-sensor.html"/>
        <link rel="prev" title="sample/sample.h" href="sample-sample.html"/> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> CSC-ATAMO Dusty Project
          

          
          </a>

          
            
            
              <div class="version">
                0.6a
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Overview</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../toc.html">Table of Contents</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../intro/home.html">Background</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../usage/main.html">Project How-To’s</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../quickRef/quickRef.html">Quick Reference</a></li>
</ul>
<p class="caption"><span class="caption-text">System Design</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../tech_arch/main.html">System Design</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tech_deploy/main.html">System Deployment</a></li>
</ul>
<p class="caption"><span class="caption-text">Implementation</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../main.html">Sensor Host Design</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../sh_mainRoutine.html">Sensor Host Design</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sleep/sleep.html">Sleep Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sh_configurations.html">Sensor Host Configurations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../hardware/hardware_dustyDuinoProMap.html">Dusty-to-M7 Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="../uart/dustyAvrIF.html">Dusty API UART</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sh_codeOrg.html">Code Organization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contrib/Modules.html">Sensor Host Modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="../time.html">System Timing</a></li>
<li class="toctree-l2"><a class="reference internal" href="dp_conf.html">dp_conf.h</a></li>
<li class="toctree-l2"><a class="reference internal" href="dp_sm.html">dp_sm.h</a></li>
<li class="toctree-l2"><a class="reference internal" href="dp_port.html">dp_port.h</a></li>
<li class="toctree-l2"><a class="reference internal" href="usart-ISerial.html">usart/ISerial.h</a></li>
<li class="toctree-l2"><a class="reference internal" href="usart-flow.html">usart/usart_flow.h</a></li>
<li class="toctree-l2"><a class="reference internal" href="usart-vars.html">usart/usart_vars.h</a></li>
<li class="toctree-l2"><a class="reference internal" href="sample-sample.html">sample/sample.h</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">sample/frame.h</a></li>
<li class="toctree-l2"><a class="reference internal" href="sample-sensor.html">sample/sensor.h</a></li>
<li class="toctree-l2"><a class="reference internal" href="sample-accelMagno.html">sample/0x00_AccelMagno/AccelMagno.h</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../implement_nm/main.html">Network Manager</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../implement_db/main.html">DynamoDB</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../implement_wa/main.html">Django Web Application</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tech_testing/main.html">Testing</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">CSC-ATAMO Dusty Project</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../main.html">Sensor Host Design</a> &raquo;</li>
        
      <li>sample/frame.h</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/implement_sh/src/sample-frame.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="sample-frame-h">
<h1>sample/frame.h<a class="headerlink" href="#sample-frame-h" title="Permalink to this headline">¶</a></h1>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric">Defines</p>
<dl class="macro">
<dt id="c.DP_SAM__N_FIELD_MAX">
<span class="target" id="frame_8h_1ab08dfcc7932c3b6c0b87d391ae74488f"></span><code class="descname">DP_SAM__N_FIELD_MAX</code><a class="headerlink" href="#c.DP_SAM__N_FIELD_MAX" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="macro">
<dt id="c.DP_SAM__LEN_FIELD_VAL_MAX">
<span class="target" id="frame_8h_1a7b389cf58229a0ddaea1478bef5eb691"></span><code class="descname">DP_SAM__LEN_FIELD_VAL_MAX</code><a class="headerlink" href="#c.DP_SAM__LEN_FIELD_VAL_MAX" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="macro">
<dt id="c.DP_SAM__LEN_FIELD_VAL_MIN">
<span class="target" id="frame_8h_1af7fca02973472c66a5a4b966a5830fd0"></span><code class="descname">DP_SAM__LEN_FIELD_VAL_MIN</code><a class="headerlink" href="#c.DP_SAM__LEN_FIELD_VAL_MIN" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="macro">
<dt id="c.DP_SAM__LEN_FIELD_VAL_TIME">
<span class="target" id="frame_8h_1aaf9ca4921e43fdd14901f48a67bf2847"></span><code class="descname">DP_SAM__LEN_FIELD_VAL_TIME</code><a class="headerlink" href="#c.DP_SAM__LEN_FIELD_VAL_TIME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="macro">
<dt id="c.DP_SAM__LEN_FIELD_VAL_DIAG">
<span class="target" id="frame_8h_1a66b4f78e3a0f0bbfff79ca79c6dc7ee0"></span><code class="descname">DP_SAM__LEN_FIELD_VAL_DIAG</code><a class="headerlink" href="#c.DP_SAM__LEN_FIELD_VAL_DIAG" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="macro">
<dt id="c.DP_SAM__LEN_FIELD_HEAD">
<span class="target" id="frame_8h_1a0684d3aa88193e5dc1664d6a86198a31"></span><code class="descname">DP_SAM__LEN_FIELD_HEAD</code><a class="headerlink" href="#c.DP_SAM__LEN_FIELD_HEAD" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="macro">
<dt id="c.DP_SAM__LEN_DATL_HEAD">
<span class="target" id="frame_8h_1a57436d9edcc69ea284824eff864514c2"></span><code class="descname">DP_SAM__LEN_DATL_HEAD</code><a class="headerlink" href="#c.DP_SAM__LEN_DATL_HEAD" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="macro">
<dt id="c.DP_SAM__LEN_PAYL_HEAD">
<span class="target" id="frame_8h_1ae862e559a0d00d60aa910b4e06ae17d1"></span><code class="descname">DP_SAM__LEN_PAYL_HEAD</code><a class="headerlink" href="#c.DP_SAM__LEN_PAYL_HEAD" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="macro">
<dt id="c.DP_SAM__LEN_PAYL_MAX">
<span class="target" id="frame_8h_1a96859afa9bc060acb0ad6d3c9f7c649a"></span><code class="descname">DP_SAM__LEN_PAYL_MAX</code><a class="headerlink" href="#c.DP_SAM__LEN_PAYL_MAX" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="macro">
<dt id="c.DP_SAM__PAYL_TYPE_DATA">
<span class="target" id="frame_8h_1ad8b049ee4891e77b162214525e17c5a4"></span><code class="descname">DP_SAM__PAYL_TYPE_DATA</code><a class="headerlink" href="#c.DP_SAM__PAYL_TYPE_DATA" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="macro">
<dt id="c.DP_SAM__PAYL_TYPE_CONF">
<span class="target" id="frame_8h_1a6944e95985b3a149b9a5ff159d8409f4"></span><code class="descname">DP_SAM__PAYL_TYPE_CONF</code><a class="headerlink" href="#c.DP_SAM__PAYL_TYPE_CONF" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="macro">
<dt id="c.DP_SAM__FIELD_TYPE_TIME">
<span class="target" id="frame_8h_1a6b0fded156a0791f13f6aeea7da3def2"></span><code class="descname">DP_SAM__FIELD_TYPE_TIME</code><a class="headerlink" href="#c.DP_SAM__FIELD_TYPE_TIME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="macro">
<dt id="c.DP_SAM__FIELD_TYPE_SENS">
<span class="target" id="frame_8h_1a2c39b015382a06b153e75ec17f939adf"></span><code class="descname">DP_SAM__FIELD_TYPE_SENS</code><a class="headerlink" href="#c.DP_SAM__FIELD_TYPE_SENS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="macro">
<dt id="c.DP_SAM__FIELD_TYPE_DIAG">
<span class="target" id="frame_8h_1a2162af976c8c745a11f5b8aa1d765af7"></span><code class="descname">DP_SAM__FIELD_TYPE_DIAG</code><a class="headerlink" href="#c.DP_SAM__FIELD_TYPE_DIAG" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric">Functions</p>
<dl class="function">
<dt id="_CPPv213reserve_field7uint8_t7uint8_tP7uint8_tP7uint8_t">
<span id="reserve_field__uint8_t.uint8_t.uint8_tP.uint8_tP"></span><span class="target" id="frame_8h_1a1222b19bea7edefbcb23ed9f171aabbf"></span>uint8_t <code class="descname">reserve_field</code><span class="sig-paren">(</span>uint8_t, uint8_t, uint8_t *, uint8_t *<span class="sig-paren">)</span><a class="headerlink" href="#_CPPv213reserve_field7uint8_t7uint8_tP7uint8_tP7uint8_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Reserve space in payload for field of desired length. </p>
<p>Increments internal payload pointer to end of required space for field (i.e. reserves field). Calls pack_payload_header to build and write field header to payload. Returns pointer to beginning of field value.</p>
<p><dl class="docutils">
<dt><strong>Return</strong></dt>
<dd>pointer to start of field value in payload, -1 on failure </dd>
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal"><span class="pre">type</span></code>: code representing the type of data/field to be reserved </li>
<li><code class="docutils literal"><span class="pre">len</span></code>: length of field value in bytes </li>
<li><code class="docutils literal"><span class="pre">payload_ptr</span></code>: pointer to internal payload pointer dp_payload._payload_ptr </li>
<li><code class="docutils literal"><span class="pre">header_ptr</span></code>: pointer to current position in payload</li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="_CPPv217pack_field_header7uint8_t7uint8_tP7uint8_t">
<span id="pack_field_header__uint8_t.uint8_t.uint8_tP"></span><span class="target" id="frame_8h_1a3a57bfd6f96b56b12d33b9ef9a9cfcb4"></span>uint8_t <code class="descname">pack_field_header</code><span class="sig-paren">(</span>uint8_t, uint8_t, uint8_t *<span class="sig-paren">)</span><a class="headerlink" href="#_CPPv217pack_field_header7uint8_t7uint8_tP7uint8_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Build and write field header to payload. </p>
<p>Given the desired field type and length of the field value in bytes, this function constructs the appropriate field header and writes it to the payload at the position indicated by the pointer provided.</p>
<p>Field value length is encoded as the first (most significant) three bits of the field header such that: 0b001XXXXX &gt; 2 0b010XXXXX &gt; 4 0b011XXXXX &gt; 6 0b100XXXXX &gt; 8 0b101XXXXX &gt; 10 0b110XXXXX &gt; 12</p>
<p>Field type is encoded in the last (least significant) five bits of the field header. For instance: 0bXXX11111 &gt; timestamp 0bXXX11110 &gt; disgnostic In the case of sensor data, the five LSBs are encoded with the sensor type code (from system state variables).</p>
<p><dl class="docutils">
<dt><strong>Return</strong></dt>
<dd>length of field header, -1 on failure </dd>
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal"><span class="pre">type</span></code>: code representing the type of field to be reserved </li>
<li><code class="docutils literal"><span class="pre">len</span></code>: length of field value in bytes </li>
<li><code class="docutils literal"><span class="pre">header_ptr</span></code>: pointer to current position in payload</li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="_CPPv216dp_payload_flushv">
<span id="dp_payload_flush__void"></span><span class="target" id="frame_8h_1aba8afef542e86173021cc8b2966596ef"></span>void <code class="descname">dp_payload_flush</code><span class="sig-paren">(</span>void<span class="sig-paren">)</span><a class="headerlink" href="#_CPPv216dp_payload_flushv" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Clears the payload buffers. </p>
</dd></dl>

</div>
<dl class="class">
<dt id="_CPPv212dp_payload_t">
<span id="dp_payload_t"></span><span class="target" id="structdp__payload__t"></span><em class="property">struct </em><code class="descname">dp_payload_t</code><a class="headerlink" href="#_CPPv212dp_payload_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric">Public Members</p>
<dl class="member">
<dt>
<span class="target" id="structdp__payload__t_1a0d10def95285245f3ec2bd75266240f9"></span><code class="descname">dp_payload_t::_ready_send</code></dt>
<dd><p>Used to determine if payload is ready for pushing to the Dusty module for transmission over the WSN </p>
</dd></dl>

<dl class="member">
<dt>
<span class="target" id="structdp__payload__t_1a6bf18d2f0973bca55f8667a348857a4a"></span><code class="descname">dp_payload_t::_payload_ptr</code></dt>
<dd><p>Pointer to the current position in the payload, i.e. the index of the payload array (next parameter) up to which the payload has been filled/ written and at which the next entry should be placed. </p>
</dd></dl>

<dl class="member">
<dt>
<span class="target" id="structdp__payload__t_1af2e6ae18679b80a064d14df6fc7f72bc"></span><code class="descname">dp_payload_t::payload</code></dt>
<dd><p>Array for storing the current payload </p>
</dd></dl>

</div>
</dd></dl>

</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="sample-sensor.html" class="btn btn-neutral float-right" title="sample/sensor.h" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="sample-sample.html" class="btn btn-neutral" title="sample/sample.h" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, C7C.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'0.6a (ALPHA)',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>